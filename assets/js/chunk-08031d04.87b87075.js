(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08031d04"],{1148:function(e,t,a){"use strict";var n=a("a691"),o=a("577e"),i=a("1d80");e.exports=function(e){var t=o(i(this)),a="",r=n(e);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(a+=t);return a}},"408a":function(e,t){var a=1..valueOf;e.exports=function(e){return a.call(e)}},"5ebf":function(e,t,a){"use strict";a("e6eb")},6384:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-page"},[a("div",{staticClass:"opt-div"},[a("el-button",{staticStyle:{width:"60px"},attrs:{size:"mini",type:"danger"},on:{click:e.reloadPage}},[e._v("刷新")]),a("el-dropdown",{staticClass:"mt5",attrs:{size:"mini","split-button":"",type:"primary"},on:{command:e.changeLayout}},[e._v(" 布局切换 "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"dagre"}},[e._v("dagre层次")]),a("el-dropdown-item",{attrs:{command:"force"}},[e._v("force力导向")]),a("el-dropdown-item",{attrs:{command:"fruchterman"}},[e._v("fruchterman")]),a("el-dropdown-item",{attrs:{command:"grid"}},[e._v("grid网格")]),a("el-dropdown-item",{attrs:{command:"circular"}},[e._v("circular环形")]),a("el-dropdown-item",{attrs:{command:"concentric"}},[e._v("concentric同心圆")])],1)],1),a("el-radio-group",{staticClass:"mt5",attrs:{size:"mini"},on:{change:e.showTypeChange},model:{value:e.showType,callback:function(t){e.showType=t},expression:"showType"}},[a("el-radio-button",{attrs:{label:"all"}},[e._v("详细")]),a("el-radio-button",{attrs:{label:"normal"}},[e._v("概要")]),a("el-radio-button",{attrs:{label:"simple"}},[e._v("精简")])],1),a("el-radio-group",{staticClass:"mt5",attrs:{size:"mini"},on:{change:e.dataSourceChange},model:{value:e.curDataSource,callback:function(t){e.curDataSource=t},expression:"curDataSource"}},[a("el-radio-button",{attrs:{label:"mock"}},[e._v("测试数据")]),a("el-radio-button",{attrs:{label:"real"}},[e._v("真实数据")])],1)],1),e.graph?a("div",{staticClass:"cur-num",staticStyle:{width:"200px"}},[a("div",{staticClass:"mr5"},[e._v("zoom："+e._s(e.curZoom))]),a("div",[e._v("layout："+e._s(e.curLayout))])]):e._e(),a("div",{attrs:{id:"canvasDiv"}})])},o=[],i=a("5530"),r=a("1da1"),s=(a("b680"),a("159b"),a("7db0"),a("99af"),a("96cf"),a("2ef0"),a("7c3e")),c=a("1aef"),l=a.n(c),d=a("3908"),u=a("2810"),h=(a("5553"),a("7fae")),g=(a("89e9"),a("0016"),a("f55e")),p=a("ecee"),m=a("f617"),f=a("35d1"),b=a("eb70"),w=a("be8f"),y=a("4ec3");l()(w["a"]);var v=null,_={components:{},data:function(){return{win:{height:0,width:0},sourceData:{},graph:null,showType:"simple",curDataSource:"mock",rankDir:"LR",canvasCenter:[0,0],align:void 0,lineType:"polyline",lineColor:"#bababa",lineThick:2,toolTip:"",toolBar:null,minimap:null,rightMenu:null,curLayout:"dagre",curZoom:1}},computed:{},mounted:function(){this.getMainData()},methods:{getMainData:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.initWindow(),"mock"!==e.curDataSource){t.next=5;break}e.sourceData=e.initData(h["a"]),t.next=12;break;case 5:return a=e.$route.query||{nodeId:"c99b3dae-a520-4460-8474-122418792110"},console.log("queryData:",a),t.next=9,Object(y["c"])(a.nodeId);case 9:n=t.sent,console.log("全量数据:",n.data),e.sourceData=e.initData(n.data);case 12:e.initMenu(),e.initToolBar(),e.initMiniMap(),e.initToolTip(),e.initJsxNode(),e.initG6();case 18:case"end":return t.stop()}}),t)})))()},initG6:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:d["a"].show(),s["a"].Util.processParallelEdges(e.sourceData.edges,20,"quadratic","polyline","loop"),e.graph=new s["a"].Graph({container:"canvasDiv",width:e.win.width,height:e.win.height,groupByTypes:!0,fitView:!1,fitViewPadding:0,fitCenter:!0,linkCenter:!1,animate:!0,enabledStack:!0,minZoom:.05,maxZoom:1.5,modes:{default:["drag-canvas","zoom-canvas","drag-node","shortcuts-call","drag-combo","collapse-expand-combo"]},plugins:[e.toolTip,e.minimap,e.rightMenu,e.toolBar],layout:{type:"dagre",rankdir:e.rankDir,align:e.align,sortByCombo:!0,nodesepFunc:function(){return 20},ranksepFunc:function(){return 20}},defaultNode:{size:[250,310],color:"#000",style:{cursor:"pointer",lineWidth:3}},defaultEdge:{color:e.lineColor,type:e.lineType,labelCfg:{refY:-10},style:{cursor:"pointer",lineWidth:e.lineThick,color:e.lineColor,endArrow:!0}},defaultCombo:{type:"cRect",style:{fill:"#deffff",stroke:"#000099",lineWidth:3,radius:10,shadowColor:"rgba(0, 0, 0, 0.3)",shadowBlur:10,shadowOffsetX:10,shadowOffsetY:10},labelCfg:{position:"top",refY:-35,style:{fontSize:25,fontWeight:"bold"}}},comboStateStyles:{hover:{lineWidth:4,fill:"#FE9797",stroke:"#FE9797"}},nodeStateStyles:{highlight:{opacity:1},dark:{opacity:.2}},edgeStateStyles:{highlight:{lineWidth:3,stroke:"#ff3300"}}}),e.graph.data(e.sourceData),e.graph.render(),e.curZoom=e.graph.getZoom().toFixed(2),setTimeout((function(){var e=v.graph.findById("2");v.graph.focusItem(e)}),1e3),d["a"].hide(),e.graph.on("node:click",(function(e){var t=e.item;console.log(e),console.log("点击node:{"+t._cfg.model.id+" , "+t._cfg.model.label+"|"+t._cfg.model.x+","+t._cfg.model.y+"}"),v.graph.focusItem(t),v.graph.setAutoPaint(!1),v.graph.getNodes().forEach((function(e){v.graph.clearItemStates(e),v.graph.setItemState(e,"dark",!0)})),v.graph.setItemState(t,"dark",!1),v.graph.setItemState(t,"highlight",!0),v.filtNodeAndEdge(v.graph,t),v.graph.paint(),v.graph.setAutoPaint(!0)})),e.graph.on("canvas:click",(function(){v.clearAllStats()})),e.graph.on("combo:click",(function(e){v.clearAllStats(),"combo-marker-shape"===e.target.get("name")&&v.graph.collapseExpandCombo(e.item)}));case 11:case"end":return t.stop()}}),t)})))()},filtNodeAndEdge:function(e,t){e.getEdges().forEach((function(a){a.getSource()===t?(e.setItemState(a.getTarget(),"dark",!1),e.setItemState(a.getTarget(),"highlight",!0),e.setItemState(a,"highlight",!0),a.toFront()):a.getTarget()===t?(e.setItemState(a.getSource(),"dark",!1),e.setItemState(a.getSource(),"highlight",!0),e.setItemState(a,"highlight",!0),a.toFront()):e.setItemState(a,"highlight",!1)}))},changeLayout:function(e){d["a"].show(),this.curLayout=e;var t={rankDir:this.rankDir,canvasCenter:this.canvasCenter},a=g["a"][this.curLayout](t);this.graph.destroyLayout(),console.log("切换布局-".concat(this.curLayout,":"),a),this.graph.updateLayout(a),setTimeout((function(){v.graph.fitView(10),d["a"].hide()}),1e3)},initCombo:function(){var e=function(e,t,a){return[["M",e-a,t],["a",a,a,0,1,0,2*a,0],["a",a,a,0,1,0,2*-a,0],["M",e-a+4,t],["L",e-a+2*a-4,t]]},t=function(e,t,a){return[["M",e-a,t],["a",a,a,0,1,0,2*a,0],["a",a,a,0,1,0,2*-a,0],["M",e-a+4,t],["L",e-a+2*a-4,t],["M",e-a+a,t-a+4],["L",e,t+a-4]]};s["a"].registerCombo("cRect",{drawShape:function(t,a){var n=this;t.padding=t.padding||[20,50,20,50];var o=n.getShapeStyle(t);o.radius=10;var r=a.addShape("rect",{attrs:Object(i["a"])(Object(i["a"])({},o),{},{x:-o.width/2-(t.padding[3]-t.padding[1])/2,y:-o.height/2-(t.padding[0]-t.padding[2])/2,width:o.width,height:o.height}),draggable:!0,name:"combo-keyShape"});return o.cursor="pointer",a.addShape("marker",{attrs:Object(i["a"])(Object(i["a"])({},o),{},{fill:"#fff",opacity:1,x:t.style.width/2+t.padding[1],y:0-t.padding[0],r:10,symbol:e}),draggable:!0,name:"combo-marker-shape"}),r},afterUpdate:function(a,n){var o=n.get("group"),i=o.find((function(e){return"combo-marker-shape"===e.get("name")}));i.attr({x:a.style.width/2+a.padding[1],y:0-a.padding[0],symbol:a.collapsed?t:e})}},"rect")},initMenu:function(){this.rightMenu=new s["a"].Menu({getContent:function(){return'\n          <div class="left-menu">\n            <button class="menu-btn">功能1</button>\n            <button class="menu-btn">功能2</button>\n            <button class="menu-btn">功能3</button>\n            \n            <button class="menu-btn">功能4</button>\n          </div>'},handleMenuClick:function(e,t){console.log(e,t)},offsetX:26,offsetY:-10,itemTypes:["node"]})},initMiniMap:function(){this.minimap=new s["a"].Minimap({size:[250,150]})},initToolBar:function(){this.toolBar=new s["a"].ToolBar({position:{x:10,y:10}})},initToolTip:function(){this.toolTip=new s["a"].Tooltip({offsetX:0,offsetY:0,fixToNode:[1,.5],itemTypes:["node","edge"],getContent:function(e){var t=document.createElement("div");t.style.width="fit-content",t.style.height="fit-content";var a=e.item.getModel();if("node"===e.item.getType())t.innerHTML=Object(u["a"])(a);else{var n=e.item.getSource(),o=e.item.getTarget();t.innerHTML="来源：".concat(n.getModel().label,"<br/>去向：").concat(o.getModel().label)}return t}})},initWindow:function(){v=this,this.win.height=(document.documentElement.clientHeight||document.body.clientHeight)-10,this.win.width=(document.documentElement.clientWidth||document.body.clientWidth)-10,this.canvasCenter=[this.win.width/2,this.win.height/2],console.log("winWid:"+this.win.width+",winHei:"+this.win.height)},clearAllStats:function(){var e=this;e.graph.setAutoPaint(!1),e.graph.getNodes().forEach((function(t){e.graph.clearItemStates(t)})),e.graph.getEdges().forEach((function(t){e.graph.clearItemStates(t)})),e.graph.paint(),e.graph.setAutoPaint(!0)},initData:function(e){var t=this;return e.nodes.forEach((function(e){switch(e.img=a("8cba")("./"+e.icon.toLowerCase()+".png"),e.obj={userHead:a("a1d8"),status:a("1570"),level:a("8dab"),inList:["会议申请单.doc","会议参会人员名单.excl"],outList:["会议纪要1.doc"]},t.showType){case"all":e.size=[250,310];break;case"normal":e.size=[250,90];break;case"simple":e.size=[250,50];break;default:break}switch(e.icon){case"data":case"document":e.type="data_node";break;case"DataPacket":e.type="datagroup_node";break;case"chat":case"im":e.type="chat_node_"+t.showType;break;case"task":e.type="task_node_"+t.showType;break;case"tool":case"MeetingInfo":e.type="meet_node_"+t.showType;break;default:e.type="data_node";break}})),console.log("【当前数据】",e),e},initJsxNode:function(){s["a"].registerNode("task_node_all",{jsx:p["a"].task_jsx4All}),s["a"].registerNode("task_node_normal",{jsx:p["a"].task_jsx4Normal}),s["a"].registerNode("task_node_simple",{jsx:p["a"].task_jsx4Simple}),s["a"].registerNode("meet_node_all",{jsx:m["a"].meet_jsx4All}),s["a"].registerNode("meet_node_normal",{jsx:m["a"].meet_jsx4Normal}),s["a"].registerNode("meet_node_simple",{jsx:m["a"].meet_jsx4Simple}),s["a"].registerNode("chat_node_all",{jsx:f["a"].chat_jsx4All}),s["a"].registerNode("chat_node_normal",{jsx:f["a"].chat_jsx4Normal}),s["a"].registerNode("chat_node_simple",{jsx:f["a"].chat_jsx4Simple}),s["a"].registerNode("data_node",{jsx:b["a"].data_jsx}),s["a"].registerNode("datagroup_node",{jsx:b["a"].datagroup_jsx})},showTypeChange:function(e){this.showType=e,this.graph&&(this.graph.clear(),this.graph.destroy()),this.getMainData(),d["a"].hide()},dataSourceChange:function(e){this.curDataSource=e,this.graph&&(this.graph.clear(),this.graph.destroy()),this.getMainData(),d["a"].hide()},reloadPage:function(){location.reload()}}},k=_,x=(a("5ebf"),a("2877")),S=Object(x["a"])(k,n,o,!1,null,null,null);t["default"]=S.exports},b680:function(e,t,a){"use strict";var n=a("23e7"),o=a("a691"),i=a("408a"),r=a("1148"),s=a("d039"),c=1..toFixed,l=Math.floor,d=function(e,t,a){return 0===t?a:t%2===1?d(e,t-1,a*e):d(e*e,t/2,a)},u=function(e){var t=0,a=e;while(a>=4096)t+=12,a/=4096;while(a>=2)t+=1,a/=2;return t},h=function(e,t,a){var n=-1,o=a;while(++n<6)o+=t*e[n],e[n]=o%1e7,o=l(o/1e7)},g=function(e,t){var a=6,n=0;while(--a>=0)n+=e[a],e[a]=l(n/t),n=n%t*1e7},p=function(e){var t=6,a="";while(--t>=0)if(""!==a||0===t||0!==e[t]){var n=String(e[t]);a=""===a?n:a+r.call("0",7-n.length)+n}return a},m=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){c.call({})}));n({target:"Number",proto:!0,forced:m},{toFixed:function(e){var t,a,n,s,c=i(this),l=o(e),m=[0,0,0,0,0,0],f="",b="0";if(l<0||l>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(f="-",c=-c),c>1e-21)if(t=u(c*d(2,69,1))-69,a=t<0?c*d(2,-t,1):c/d(2,t,1),a*=4503599627370496,t=52-t,t>0){h(m,0,a),n=l;while(n>=7)h(m,1e7,0),n-=7;h(m,d(10,n,1),0),n=t-1;while(n>=23)g(m,1<<23),n-=23;g(m,1<<n),h(m,1,1),g(m,2),b=p(m)}else h(m,0,a),h(m,1<<-t,0),b=p(m)+r.call("0",l);return l>0?(s=b.length,b=f+(s<=l?"0."+r.call("0",l-s)+b:b.slice(0,s-l)+"."+b.slice(s-l))):b=f+b,b}})},e6eb:function(e,t,a){}}]);