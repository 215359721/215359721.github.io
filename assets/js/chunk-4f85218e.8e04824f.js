(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f85218e"],{3048:function(t,e,a){},"3b83":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-page"},[a("div",{staticClass:"opt-div"},[a("el-button",{staticStyle:{width:"60px"},attrs:{size:"mini",type:"danger"},on:{click:t.reloadPage}},[t._v("刷新")]),a("el-dropdown",{staticClass:"mt5",attrs:{size:"mini","split-button":"",type:"primary"},on:{command:t.changeLayout}},[t._v(" 布局切换 "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"dagre"}},[t._v("dagre层次")]),a("el-dropdown-item",{attrs:{command:"force"}},[t._v("force力导向")]),a("el-dropdown-item",{attrs:{command:"fruchterman"}},[t._v("fruchterman")]),a("el-dropdown-item",{attrs:{command:"grid"}},[t._v("grid网格")]),a("el-dropdown-item",{attrs:{command:"circular"}},[t._v("circular环形")]),a("el-dropdown-item",{attrs:{command:"concentric"}},[t._v("concentric同心圆")])],1)],1),a("el-radio-group",{staticClass:"mt5",attrs:{size:"mini"},on:{change:t.showTypeChange},model:{value:t.showType,callback:function(e){t.showType=e},expression:"showType"}},[a("el-radio-button",{attrs:{label:"all"}},[t._v("详细")]),a("el-radio-button",{attrs:{label:"normal"}},[t._v("概要")]),a("el-radio-button",{attrs:{label:"simple"}},[t._v("精简")])],1),a("el-radio-group",{staticClass:"mt5",attrs:{size:"mini"},on:{change:t.dataSourceChange},model:{value:t.curDataSource,callback:function(e){t.curDataSource=e},expression:"curDataSource"}},[a("el-radio-button",{attrs:{label:"outer"}},[t._v("测试数据")]),a("el-radio-button",{attrs:{label:"real"}},[t._v("真实数据")])],1)],1),t.graph?a("div",{staticClass:"cur-num"},[a("div",[t._v("zoom："+t._s(t.graph.getZoom().toFixed(2)))]),a("div",[t._v("layout："+t._s(t.curLayout))])]):t._e(),a("div",{attrs:{id:"canvasDiv"}})])},i=[],n=a("5530"),r=a("1da1"),s=(a("96cf"),a("159b"),a("7db0"),a("99af"),a("2ef0"),a("7c3e")),c=a("1aef"),l=a.n(c),d=a("3908"),h=a("2810"),u=a("5553"),g=a("7fae"),p=(a("89e9"),a("0016"),a("f55e")),m=a("ecee"),f=a("f617"),b=a("35d1"),w=a("eb70"),y=a("be8f");l()(y["a"]);var _=null,v={components:{},data:function(){return{win:{height:0,width:0},sourceData:{},graph:null,showType:"all",curDataSource:"outer",rankDir:"LR",canvasCenter:[0,0],align:void 0,lineType:"polyline",lineColor:"#bababa",lineThick:2,toolTip:"",toolBar:null,minimap:null,rightMenu:null,curLayout:"dagre"}},computed:{},mounted:function(){this.initWindow(),this.sourceData=this.initData(g["a"]),this.initMenu(),this.initToolBar(),this.initMiniMap(),this.initToolTip(),this.initJsxNode(),this.initCombo(),this.initG6()},methods:{initG6:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:d["a"].show(),s["a"].Util.processParallelEdges(t.sourceData.edges,80,"quadratic","polyline","loop"),t.graph=new s["a"].Graph({container:"canvasDiv",width:t.win.width,height:t.win.height,groupByTypes:!0,fitView:!1,fitViewPadding:0,fitCenter:!1,linkCenter:!1,animate:!0,enabledStack:!0,minZoom:.05,maxZoom:1.5,modes:{default:["drag-canvas","zoom-canvas","drag-node","shortcuts-call","drag-combo","collapse-expand-combo"]},plugins:[t.toolTip,t.minimap,t.rightMenu,t.toolBar],layout:{type:"dagre",rankdir:t.rankDir,align:t.align,sortByCombo:!0,nodesepFunc:function(){return 20},ranksepFunc:function(){return 20}},defaultNode:{size:[250,310],color:"#000",style:{cursor:"pointer",lineWidth:3}},defaultEdge:{color:t.lineColor,type:t.lineType,labelCfg:{autoRotate:!0,refY:-10},style:{cursor:"pointer",lineWidth:t.lineThick,color:t.lineColor,endArrow:!0}},defaultCombo:{type:"cRect",style:{fill:"#deffff",stroke:"#000099",lineWidth:3,radius:10,shadowColor:"rgba(0, 0, 0, 0.3)",shadowBlur:10,shadowOffsetX:10,shadowOffsetY:10},labelCfg:{position:"top",refY:-35,style:{fontSize:25,fontWeight:"bold"}}},comboStateStyles:{hover:{lineWidth:4,fill:"#FE9797",stroke:"#FE9797"}},nodeStateStyles:{highlight:{opacity:1},dark:{opacity:.2}},edgeStateStyles:{highlight:{lineWidth:6,stroke:"#999"}}}),t.graph.data(t.sourceData),t.graph.render(),setTimeout((function(){var t=_.graph.findById("2");_.graph.focusItem(t),d["a"].hide()}),1e3),t.graph.on("node:click",(function(t){var e=t.item;console.log(t),console.log("点击node:{"+e._cfg.model.id+" , "+e._cfg.model.label+"|"+e._cfg.model.x+","+e._cfg.model.y+"}"),_.graph.focusItem(e),_.graph.setAutoPaint(!1),_.graph.getNodes().forEach((function(t){_.graph.clearItemStates(t),_.graph.setItemState(t,"dark",!0)})),_.graph.setItemState(e,"dark",!1),_.graph.setItemState(e,"highlight",!0),_.filtNodeAndEdge(_.graph,e),_.graph.paint(),_.graph.setAutoPaint(!0)})),t.graph.on("canvas:click",(function(){_.clearAllStats()})),t.graph.on("combo:click",(function(t){_.clearAllStats(),"combo-marker-shape"===t.target.get("name")&&_.graph.collapseExpandCombo(t.item)}));case 9:case"end":return e.stop()}}),e)})))()},filtNodeAndEdge:function(t,e){t.getEdges().forEach((function(a){a.getSource()===e?(t.setItemState(a.getTarget(),"dark",!1),t.setItemState(a.getTarget(),"highlight",!0),t.setItemState(a,"highlight",!0),a.toFront()):a.getTarget()===e?(t.setItemState(a.getSource(),"dark",!1),t.setItemState(a.getSource(),"highlight",!0),t.setItemState(a,"highlight",!0),a.toFront()):t.setItemState(a,"highlight",!1)}))},changeLayout:function(t){d["a"].show(),this.curLayout=t;var e={rankDir:this.rankDir,canvasCenter:this.canvasCenter},a=p["a"][this.curLayout](e);this.graph.destroyLayout(),console.log("切换布局-".concat(this.curLayout,":"),a),this.graph.updateLayout(a),setTimeout((function(){_.graph.fitView(10),d["a"].hide()}),1e3)},initCombo:function(){var t=function(t,e,a){return[["M",t-a,e],["a",a,a,0,1,0,2*a,0],["a",a,a,0,1,0,2*-a,0],["M",t-a+4,e],["L",t-a+2*a-4,e]]},e=function(t,e,a){return[["M",t-a,e],["a",a,a,0,1,0,2*a,0],["a",a,a,0,1,0,2*-a,0],["M",t-a+4,e],["L",t-a+2*a-4,e],["M",t-a+a,e-a+4],["L",t,e+a-4]]};s["a"].registerCombo("cRect",{drawShape:function(e,a){var o=this;e.padding=e.padding||[20,50,20,50];var i=o.getShapeStyle(e);i.radius=10;var r=a.addShape("rect",{attrs:Object(n["a"])(Object(n["a"])({},i),{},{x:-i.width/2-(e.padding[3]-e.padding[1])/2,y:-i.height/2-(e.padding[0]-e.padding[2])/2,width:i.width,height:i.height}),draggable:!0,name:"combo-keyShape"});return i.cursor="pointer",a.addShape("marker",{attrs:Object(n["a"])(Object(n["a"])({},i),{},{fill:"#fff",opacity:1,x:e.style.width/2+e.padding[1],y:0-e.padding[0],r:10,symbol:t}),draggable:!0,name:"combo-marker-shape"}),r},afterUpdate:function(a,o){var i=o.get("group"),n=i.find((function(t){return"combo-marker-shape"===t.get("name")}));n.attr({x:a.style.width/2+a.padding[1],y:0-a.padding[0],symbol:a.collapsed?e:t})}},"rect")},initMenu:function(){this.rightMenu=new s["a"].Menu({getContent:function(){return'\n          <div class="left-menu">\n            <button class="menu-btn">功能1</button>\n            <button class="menu-btn">功能2</button>\n            <button class="menu-btn">功能3</button>\n            <button class="menu-btn">功能4</button>\n          </div>'},handleMenuClick:function(t,e){console.log(t,e)},offsetX:26,offsetY:-10,itemTypes:["node"]})},initMiniMap:function(){this.minimap=new s["a"].Minimap({size:[250,150]})},initToolBar:function(){this.toolBar=new s["a"].ToolBar({position:{x:10,y:10}})},initToolTip:function(){this.toolTip=new s["a"].Tooltip({offsetX:0,offsetY:0,fixToNode:[1,.5],itemTypes:["node","edge"],getContent:function(t){var e=document.createElement("div");if(e.style.width="fit-content",e.style.height="fit-content","node"===t.item.getType())e.innerHTML=h["a"];else{var a=t.item.getSource(),o=t.item.getTarget();e.innerHTML="来源：".concat(a.getModel().label,"<br/>去向：").concat(o.getModel().label)}return e}})},initWindow:function(){_=this,this.win.height=(document.documentElement.clientHeight||document.body.clientHeight)-10,this.win.width=(document.documentElement.clientWidth||document.body.clientWidth)-10,this.canvasCenter=[this.win.width/2,this.win.height/2],console.log("winWid:"+this.win.width+",winHei:"+this.win.height)},clearAllStats:function(){var t=this;t.graph.setAutoPaint(!1),t.graph.getNodes().forEach((function(e){t.graph.clearItemStates(e)})),t.graph.getEdges().forEach((function(e){t.graph.clearItemStates(e)})),t.graph.paint(),t.graph.setAutoPaint(!0)},initData:function(t){var e=this;return t.nodes.forEach((function(t){switch(t.img=a("8cba")("./"+t.icon+".png"),t.obj={userHead:a("a1d8"),status:a("1570"),level:a("8dab"),inList:["会议申请单.doc","会议参会人员名单.excl"],outList:["会议纪要1.doc"]},e.showType){case"all":t.size=[250,310];break;case"normal":t.size=[250,90];break;case"simple":t.size=[250,50];break;default:break}switch(t.icon){case"data":case"document":t.type="data_node";break;case"chat":case"im":t.type="chat_node_"+e.showType;break;case"task":t.type="task_node_"+e.showType;break;case"tool":case"MeetingInfo":t.type="meet_node_"+e.showType;break;default:t.type="data_node";break}})),console.log("【当前数据】",t),t},initJsxNode:function(){s["a"].registerNode("task_node_all",{jsx:m["a"].task_jsx4All}),s["a"].registerNode("task_node_normal",{jsx:m["a"].task_jsx4Normal}),s["a"].registerNode("task_node_simple",{jsx:m["a"].task_jsx4Simple}),s["a"].registerNode("meet_node_all",{jsx:f["a"].meet_jsx4All}),s["a"].registerNode("meet_node_normal",{jsx:f["a"].meet_jsx4Normal}),s["a"].registerNode("meet_node_simple",{jsx:f["a"].meet_jsx4Simple}),s["a"].registerNode("chat_node_all",{jsx:b["a"].chat_jsx4All}),s["a"].registerNode("chat_node_normal",{jsx:b["a"].chat_jsx4Normal}),s["a"].registerNode("chat_node_simple",{jsx:b["a"].chat_jsx4Simple}),s["a"].registerNode("data_node",{jsx:w["a"].data_jsx})},showTypeChange:function(t){this.showType=t,this.sourceData=this.initData(this.sourceData),this.graph.changeData(this.sourceData),this.changeLayout(this.curLayout)},dataSourceChange:function(t){switch(t){case"outer":this.sourceData=this.initData(g["a"]);break;case"real":this.sourceData=this.initData(u["a"]);break;default:break}console.log("sourceData:",this.sourceData),this.graph.changeData(this.sourceData),this.changeLayout(this.curLayout)},reloadPage:function(){location.reload()}}},k=v,S=(a("fa5a"),a("2877")),T=Object(S["a"])(k,o,i,!1,null,null,null);e["default"]=T.exports},fa5a:function(t,e,a){"use strict";a("3048")}}]);