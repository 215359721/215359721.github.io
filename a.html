<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>QWebChannel Example</title>
  <!-- 确保qwebchannel.js的路径是正确的 -->
  <script type="text/javascript" src="qwebchannel.js"></script>
</head>

<body>
  <button id="openAppBtn" disabled>打开应用程序1</button>

  <script type="text/javascript">
    window.onload = function () {
      if (typeof QWebChannel !== "undefined") {
        console.log('difdif', new QWebChannel())
        new QWebChannel(qt.webChannelTransport, function (channel) {

          window.bridge = channel.objects.bridge;

          // 启用按钮，确保此时 window.bridge 已经可用
          document.getElementById("openAppBtn").disabled = false;
        });
      } else {
        console.error("QWebChannel 未定义，请检查 qwebchannel.js 是否已正确加载");
      }
    };

    function openApp () {
      if (window.bridge) {
        window.bridge.open_and_embed('应用程序1');
      } else {
        console.error("bridge 对象未定义");
      }
    }

    document.getElementById("openAppBtn").onclick = openApp;
  </script>
</body>

</html>